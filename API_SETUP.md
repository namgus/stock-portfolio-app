# 공공데이터포털 API 연동 가이드

## 개요

이 프로젝트는 공공데이터포털의 금융위원회 주식시세정보 API를 사용하여 실시간 국내 주식 시세 데이터를 제공합니다.

## API 키 발급 방법

### 1단계: 공공데이터포털 회원가입

1. [공공데이터포털](https://www.data.go.kr) 접속
2. 우측 상단 "회원가입" 클릭
3. 개인회원으로 가입

### 2단계: API 신청

1. [금융위원회_주식시세정보 페이지](https://www.data.go.kr/data/15094808/openapi.do) 접속
2. "활용신청" 버튼 클릭
3. 활용목적 입력:
   ```
   주식 포트폴리오 추천 웹사이트 개발
   국내 주식 시세 정보 조회용
   ```
4. "신청" 버튼 클릭

### 3단계: API 키 확인

1. 신청 후 약 1-2시간 내 승인 (자동 승인)
2. 공공데이터포털 > 마이페이지 > 오픈API > 개발계정 메뉴
3. "인증키(일반)" 복사 (Decoding 값)

## API 키 설정 방법

### 방법 1: .env 파일 수정 (추천)

1. 프로젝트 루트 디렉토리의 `.env` 파일 열기
2. 다음과 같이 API 키 입력:

```env
VITE_PUBLIC_DATA_API_KEY=발급받은_API_키_입력
```

### 방법 2: .env 파일 생성

`.env` 파일이 없다면 다음 명령으로 생성:

```bash
cp .env.example .env
```

그 후 `.env` 파일에 API 키 입력

## 개발 서버 재시작

API 키 설정 후 개발 서버를 재시작하세요:

```bash
# 기존 서버 종료 (Ctrl + C)
# 다시 시작
npm run dev
```

## API 사용 제한

- **개발계정**: 일 10,000회 호출 제한
- **운영계정**: 활용사례 등록 시 트래픽 증가 가능
- **갱신주기**: 일 1회 (전일 종가 기준)

## 주의사항

### CORS 문제

공공데이터포털 API는 브라우저에서 직접 호출 시 CORS 문제가 발생할 수 있습니다.

**해결 방법**:
- **프로덕션 환경**: 백엔드 서버를 통해 API 호출
- **개발 환경**: Vite 프록시 설정 또는 CORS 확장 프로그램 사용

### Vite 프록시 설정 (선택사항)

`vite.config.js` 파일에 다음 추가:

```javascript
export default defineConfig({
  plugins: [react()],
  server: {
    proxy: {
      '/api': {
        target: 'http://apis.data.go.kr',
        changeOrigin: true,
        rewrite: (path) => path.replace(/^\/api/, '')
      }
    }
  }
})
```

## 트러블슈팅

### 1. API 키가 작동하지 않음

- 마이페이지에서 API 승인 상태 확인
- API 키 복사 시 앞뒤 공백 제거
- Decoding 값(일반 인증키) 사용 확인

### 2. 데이터가 로드되지 않음

- 브라우저 개발자 도구 콘솔 확인
- 주말/공휴일에는 전일 영업일 데이터 제공
- API 일일 호출 제한 확인

### 3. CORS 에러

- 개발 환경에서는 샘플 데이터 사용 권장
- 또는 백엔드 프록시 서버 구축

## API 없이 사용하기

API 키 없이도 프로젝트를 사용할 수 있습니다:

- **기본값**: 하드코딩된 샘플 데이터 사용
- 모든 기능은 정상 작동하지만 실시간 시세 정보는 제공되지 않음

## 추가 API (선택사항)

### 금융위원회_KRX상장종목정보

종목 기본 정보 조회용:
- URL: https://www.data.go.kr/data/15094775/openapi.do
- 동일한 서비스키 사용 가능

## 문의

API 관련 문의:
- 공공데이터포털 고객센터: 1661-0211
- 이메일: data@korea.kr
